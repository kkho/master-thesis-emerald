head	1.7;
access;
symbols
	105alpha:1.7
	104alpha:1.7
	103alpha:1.7
	102alpha:1.7
	101alpha:1.7
	100alpha:1.7
	DIKU_0:1.5
	immel_start:1.4;
locks; strict;


1.7
date	98.02.09.17.54.45;	author norm;	state Exp;
branches;
next	1.6;

1.6
date	97.01.21.23.51.09;	author norm;	state Exp;
branches;
next	1.5;

1.5
date	94.08.17.17.02.24;	author norm;	state Exp;
branches;
next	1.4;

1.4
date	91.06.01.07.57.10;	author norm;	state Exp;
branches;
next	1.3;

1.3
date	91.05.18.14.58.24;	author norm;	state Exp;
branches;
next	1.2;

1.2
date	91.04.22.13.44.38;	author norm;	state Exp;
branches;
next	1.1;

1.1
date	91.04.22.13.44.37;	author norm;	state Exp;
branches;
next	;


desc
@
@


1.7
log
@Checkpoint
@
text
@% 
% @@(#)Integer.m	1.2  3/6/91
%
const Integer <- immutable object Integer builtin 0x1006
  const IntegerType <- immutable typeobject IntegerType builtin 0x1606
    function + [o : Integer] -> [r : Integer]
      % r <- self + o
    function - [o : Integer] -> [r : Integer]
      % r <- self - o
    function * [o : Integer] -> [r : Integer]
      % r <- self * o
    function / [o : Integer] -> [r : Integer]
      % r <- self / o
    function # [o : Integer] -> [r : Integer]
      % r <- self % o
    function > [o : Integer] -> [r : Boolean]
      % r <- self > o
    function >= [o : Integer] -> [r : Boolean]
      % r <- self >= o
    function < [o : Integer] -> [r : Boolean]
      % r <- self < o
    function <= [o : Integer] -> [r : Boolean]
      % r <- self <= o
    function = [o : Integer] -> [r : Boolean]
      % r <- self = o
    function != [o : Integer] -> [r : Boolean]
      % r <- self != o
    function asString -> [r : String]
      % s is set to a string with no leading 0's, decimal rep.
    function asHexString -> [r : String]
      % s is set to an 8 character string, hexidecimal rep.
    function ~ -> [r : Integer]
      % r <- negate self
    function - -> [r : Integer]
      % r <- negate self
    function asReal -> [ r : Real ]
      % r <- self as a real
    function hash -> [Integer]
    function & [o : Integer] -> [r : Integer]
    function | [o : Integer] -> [r : Integer]
    function setBit [o : Integer, v : Boolean] -> [r : Integer]
    function getBit [o : Integer] -> [r : Boolean]
    function setBits [o : Integer, l : Integer, v : Integer] -> [r : Integer]
    function getBits [o : Integer, l : Integer] -> [r : Integer]
    function abs -> [r : Integer]
  end IntegerType

  export function getSignature -> [result : Signature]
    result <- IntegerType
  end getSignature
  export function create [rep : String] -> [result : IntegerType]
    result <- immutable object anInteger builtin 0x1406
      export function + [o : Integer] -> [r : Integer]
	primitive self  "ADD" [r] <- [o]
      end +
      export function - [o : Integer] -> [r : Integer]
	primitive self  "SUB" [r] <- [o]
      end -
      export function * [o : Integer] -> [r : Integer]
	primitive self  "MUL" [r] <- [o]
      end *
      export function / [o : Integer] -> [r : Integer]
	primitive self  "DIV" [r] <- [o]
      end /
      export function # [o : Integer] -> [r : Integer]
	primitive self  "MOD" [r] <- [o]
      end #
      export function > [o : Integer] -> [r : Boolean]
	primitive self  "SUB" "GT" [r] <- [o]
      end >
      export function >= [o : Integer] -> [r : Boolean]
	primitive self  "SUB" "GE" [r] <- [o]
      end >=
      export function < [o : Integer] -> [r : Boolean]
	primitive self  "SUB" "LT" [r] <- [o]
      end <
      export function <= [o : Integer] -> [r : Boolean]
	primitive self  "SUB" "LE" [r] <- [o]
      end <=
      export function = [o : Integer] -> [r : Boolean]
	primitive self  "SUB" "EQ" [r] <- [o]
      end =
      export function != [o : Integer] -> [r : Boolean]
	primitive self  "SUB" "NE" [r] <- [o]
      end !=
      export function asString -> [r : String]
	primitive self  "ISTR" [r] <- []
      end asString
      export function asHexString -> [r : String]
	primitive self  "ISTRX" [r] <- []
      end asHexString
      export function ~ -> [r : Integer]
	primitive self  "NEG" [r] <- []
      end ~
      export function - -> [r : Integer]
	primitive self  "NEG" [r] <- []
      end -
      export function asReal -> [r : Real]
	primitive self  "IFLO" [r] <- []
      end asReal
      export function hash -> [r : Integer]
	primitive self "IABS" [r] <- []
      end hash
      export function abs -> [r : Integer]
	primitive self "IABS" [r] <- []
      end abs
      export function & [o : Integer] -> [r : Integer]
	primitive self "LAND" [r] <- [o]
      end &
      export function | [o : Integer] -> [r : Integer]
	primitive self "LOR" [r] <- [o]
      end |
      export function setBit [o : Integer, v : Boolean] -> [r : Integer]
	primitive self "LSETBIT" [r] <- [o, v]
      end setBit
      export function getBit [o : Integer] -> [r : Boolean]
	primitive self "LGETBIT" [r] <- [o]
      end getBit
      export function setBits [o : Integer, l : Integer, v : Integer] -> [r : Integer]
	primitive self "LSETBITS" [r] <- [o, l, v]
      end setBits
      export function getBits [o : Integer, l : Integer] -> [r : Integer]
	primitive self "LGETBITS" [r] <- [o, l]
      end getBits
    end anInteger
  end create
  export operation literal [s : String] -> [r : IntegerType]
    primitive "STRI" [r] <- [s]
  end literal
end Integer

export Integer to "Builtins"
@


1.6
log
@Cleanup syntax, new ccalls, time fixes
@
text
@d30 2
d89 3
@


1.5
log
@Checkpoint of DIKU August 94 changes
@
text
@d4 2
a5 2
const Integer == immutable object Integer builtin 0x1006
  const IntegerType == immutable typeobject IntegerType builtin 0x1606
@


1.4
log
@Implement abs and hash for integers
@
text
@d41 2
d114 6
@


1.3
log
@Added new logical operations
@
text
@d41 1
d95 1
a95 1
	primitive self [r] <- []
d97 3
@


1.2
log
@type -> typeobject sed
@
text
@d37 4
d96 12
@


1.1
log
@Initial revision
@
text
@d2 1
a2 1
% @@(#)Integer.m	1.1  3/6/91
d5 1
a5 1
  const IntegerType == immutable type IntegerType builtin 0x1606
@
